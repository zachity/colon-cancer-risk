# Data Curation Workflow Documentation  
**Colon Cancer Risk Analysis: Behavioral Predictors at the U.S. State Level**  
_Zachariah Conlee – CS 598: Data Curation – Fall 2025_

This document describes the fully reproducible workflow used to curate, clean, integrate, and prepare the dataset used in the final project. It is designed to meet course requirements for transparency, provenance, and lifecycle documentation.

---

## 1. Overview of the Curation Pipeline

The workflow transforms two heterogeneous public health datasets:

- **BRFSS 2022** (Behavioral Risk Factor Surveillance System)  
- **USCS 1999–2022** (U.S. Cancer Statistics via CDC WONDER)

into a unified, analysis-ready dataset of state-level indicators:

- Obesity prevalence  
- Smoking prevalence  
- Age-adjusted colon & rectum cancer incidence  

The workflow follows the **CRISP–DM lifecycle**:

1. **Business Understanding** — Identify behavioral predictors of colorectal cancer incidence.
2. **Data Understanding** — Examine BRFSS and USCS structures, quality, and limitations.
3. **Data Preparation** — Cleaning, recoding, harmonizing identifiers, merging datasets.
4. **Modeling** — Regression and Random Forest (not part of the curation per se).
5. **Evaluation** — Statistical summaries, uncertainty checks, suppressed values handling.
6. **Deployment/Reproducibility** — Packaging data + scripts + documentation.

---

## 2. Directory Structure

project/
data/
raw/ # User-provided BRFSS + USCS raw files
processed/ # Outputs generated by scripts
scripts/ # Python code for each pipeline step
docs/ # Documentation (this file, codebook, metadata)
notebooks/ # Optional exploratory notebooks
environment/ # requirements.txt
final_report/ # LaTeX report + PDF


---

## 3. Inputs Required

### 3.1 BRFSS 2022 Raw Data  

data/raw/LLCP2022.XPT

- Source: https://www.cdc.gov/brfss/annual_data/annual_2022.html  
- Format: SAS Transport (.XPT)  
- Restrictions: **Cannot be redistributed**; must be downloaded manually.

### 3.2 USCS / CDC WONDER Export (1999–2022)  

data/raw/uscs_1999_2022_full.csv

- Source: https://wonder.cdc.gov/cancer.html  
- Required query:  
  - Cancer site: **Colon and Rectum**  
  - Group by: State × Year  
  - Measures: Age-adjusted incidence rate, case count  
- Restrictions: Must agree to CDC WONDER Terms of Use.

---

## 4. Step-by-Step Workflow

### **Step A — Process BRFSS Survey Data**  
Script: `scripts/brfss_2022_state_summary.py`

**Tasks performed:**
- Load the 2022 XPT file  
- Clean categorical encodings for:  
  - \_OBESITY3 → obesity status  
  - \_RFSMOK3 → smoking status  
- Remove invalid or missing responses  
- Compute **weighted state-level prevalence**  
- Output CSV:

data/processed/brfss_state_summary_2022.csv


### **Step B — Process USCS Cancer Incidence Data**  
Script: `scripts/cdc_colon_state_summaries.py`

**Tasks performed:**
- Read WONDER CSV export  
- Standardize column names  
- Filter for year = 2022  
- Exclude U.S. territories  
- Extract:  
  - Age-adjusted incidence rate  
  - Case counts  
- Handle suppressed values (`~`)  
- Output files:

data/processed/colon_state_year_1999_2022.csv
data/processed/colon_state_summary_2022.csv


### **Step C — Integrate BRFSS + USCS**  
Script: `scripts/combine_state_summaries.py`

**Tasks performed:**
- Join datasets using state abbreviation / FIPS  
- Ensure one row per state (n = 51)  
- Validate ranges:  
  - obesity: 20–45%  
  - smoking: 8–25%  
  - incidence: 30–55 per 100k  
- Create final merged dataset:

data/processed/combined_state_summary_2022.csv


---

## 5. Quality Assurance & Validation

### Integrity Checks
- Confirm 51 geographic units (50 states + D.C.)  
- Validate numeric ranges for all indicators  
- Ensure no missing values in merged table  

### Data Harmonization
- Resolve inconsistent state identifiers  
- Normalize capitalization, spacing, and abbreviations  
- Convert suppressed values to `NaN` and document them  

### Reproducibility
- Scripts accept CLI arguments for input/output paths  
- Processing steps are deterministic  
- Dependencies documented in `environment/requirements.txt`

---

## 6. Outputs Produced

Final curated dataset:

data/processed/combined_state_summary_2022.csv


Contains columns:

| Column | Description |
|--------|-------------|
| StateFIPS | Numeric state identifier |
| State | Full state name |
| Abbrev | Two-letter abbreviation |
| obesity_rate | Weighted % adults with BMI ≥ 30 (BRFSS) |
| smoking_rate | Weighted % adults who smoke (BRFSS) |
| incidence_rate_adj | Age-adjusted colorectal cancer incidence per 100k (USCS) |
| incidence_cases | Case count (USCS) |

This dataset feeds both the final analysis and the project report.

---

## 7. Notes on Ethics & Policy Compliance

- Raw BRFSS and USCS data **are not redistributed** per CDC policy.  
- Scripts operate only on locally downloaded files.  
- Analysis is ecological; conclusions avoid individual-level inference.  
- Suppressed values are handled cautiously, as per CDC data-use guidance.

---

## 8. Full Reproduction Instructions (Summary)

1. Download BRFSS XPT + USCS WONDER CSV  
2. Place in `data/raw/`  
3. Run scripts in order:  

python brfss_2022_state_summary.py
python cdc_colon_state_summaries.py
python combine_state_summaries.py

4. Use notebooks for EDA and modeling  
5. Review final outputs in `data/processed/`

---

## 9. Contact

Zachariah Conlee  
University of Illinois  
CS 598: Data Curation – Final Project  
Fall 2025